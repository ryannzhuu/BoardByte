<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{{ note["title"] }} - BoardByte</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 30px;
            background: #111;
            color: white;
        }
        body.light {
            background: white;
            color: black;
        }
        .header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }
        .header-left {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .header-right a {
            color: inherit;
            text-decoration: none;
            font-size: 14px;
            padding: 6px 10px;
            border-radius: 4px;
            border: 1px solid #444;
            margin-left: 8px;
        }
        body.light .header-right a {
            border-color: #aaa;
        }
        .note-meta {
            font-size: 13px;
            opacity: 0.8;
            margin-bottom: 12px;
        }
        .note-container {
            border-radius: 10px;
            border: 1px solid #444;
            background: #1a1a1a;
            padding: 16px;
        }
        body.light .note-container {
            background: #fafafa;
            border-color: #ccc;
        }
        .markdown h1 { font-size: 28px; margin-top: 20px; }
        .markdown h2 { font-size: 24px; margin-top: 18px; }
        .markdown h3 { font-size: 20px; margin-top: 16px; }
        .markdown h4 { font-size: 18px; margin-top: 14px; }
        .markdown p, .markdown li {
            line-height: 1.6;
            margin-bottom: 8px;
        }
        .markdown ul {
            padding-left: 20px;
        }
        .toggle-dark {
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 10px 16px;
            border-radius: 6px;
            border: 1px solid #444;
            background: #222;
            color: white;
            cursor: pointer;
            font-size: 14px;
        }
        body.light .toggle-dark {
            background: #ddd;
            color: black;
            border-color: #aaa;
        }
    </style>
</head>
<body>

<div class="header">
    <div class="header-left">
        <h1 style="margin: 0;">{{ note["title"] }}</h1>
        <button onclick="window.location.href='{{ url_for('notes') }}'" style="padding: 6px 12px; border-radius: 6px; border: 1px solid #444; background: #222; color: white; cursor: pointer; font-size: 13px;">Back to Notes</button>
    </div>
    <div class="header-right">
        <span style="font-size: 14px; opacity: 0.85;">{{ user["email"] }}</span>
        <a href="{{ url_for('logout') }}">Logout</a>
    </div>
</div>

<div class="note-meta">
    Category: {{ note["category"] }}<br>
    Created: {{ note["created_at"] }}
</div>

<div class="note-container">
    <div class="markdown">
        {{ note["content_html"]|safe }}
    </div>
</div>

<button class="toggle-dark" id="dark-toggle">Light Mode</button>

<script>
    const darkToggle = document.getElementById("dark-toggle");

    if (!localStorage.getItem("darkMode")) {
        localStorage.setItem("darkMode", "true");
    }
    if (localStorage.getItem("darkMode") === "false") {
        document.body.classList.add("light");
        darkToggle.textContent = "Dark Mode";
    }

    darkToggle.addEventListener("click", () => {
        const isLight = document.body.classList.contains("light");
        if (isLight) {
            document.body.classList.remove("light");
            localStorage.setItem("darkMode", "true");
            darkToggle.textContent = "Light Mode";
        } else {
            document.body.classList.add("light");
            localStorage.setItem("darkMode", "false");
            darkToggle.textContent = "Dark Mode";
        }
    });
</script>

</body>
</html>
